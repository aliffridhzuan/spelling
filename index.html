<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multilingual Spelling Game</title>
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --background: #F7FFF7;
            --text: #292F36;
            --correct: #6BCB77;
            --wrong: #FF6B6B;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .language-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .language-tab {
            padding: 8px 16px;
            border-radius: 50px;
            background-color: white;
            border: 2px solid var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .language-tab.active {
            background-color: var(--secondary);
            color: white;
        }
        
        .instructions {
            background-color: #E3F2FD;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .clue-box {
            background-color: var(--accent);
            border-radius: 15px;
            padding: 30px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            margin-bottom: 20px;
        }
        
        .input-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        input[type="text"] {
            padding: 15px;
            font-size: 1.5rem;
            border: 3px solid var(--secondary);
            border-radius: 10px;
            text-align: center;
        }
        
        .buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .check-btn {
            background-color: var(--correct);
        }
        
        .hint-btn {
            background-color: var(--secondary);
        }
        
        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2rem;
        }
        
        .correct {
            background-color: rgba(107, 203, 119, 0.2);
            color: var(--correct);
            animation: pop 0.5s;
        }
        
        .wrong {
            background-color: rgba(255, 107, 107, 0.2);
            color: var(--wrong);
            animation: shake 0.5s;
        }
        
        .character-tiles {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .character-tile {
            background-color: var(--accent);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .character-tile.used {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .progress {
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            flex-grow: 1;
            max-width: 300px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s;
        }
        
        @keyframes pop {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }
        
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Multilingual Spelling Game</h1>
        
        <div class="language-tabs">
            <div class="language-tab active" data-lang="en">English</div>
            <div class="language-tab" data-lang="ms">Bahasa</div>
            <div class="language-tab" data-lang="zh">中文</div>
        </div>
        
        <div class="instructions" id="instructions">
            <!-- Instructions will be set by JavaScript -->
        </div>
        
        <div class="clue-box" id="clue-box">
            <div id="clue-content">👶</div>
        </div>
        
        <div class="input-area">
            <input type="text" id="answer-input" placeholder="Type your answer..." autocomplete="off">
            
            <div class="character-tiles" id="character-tiles"></div>
            
            <div class="buttons">
                <button class="check-btn" id="check-btn">Check</button>
                <button class="hint-btn" id="hint-btn">Hint</button>
                <button id="speak-btn">Say It</button>
            </div>
            
            <div class="message" id="message"></div>
            
            <div class="progress">
                <span id="progress-text">1/7</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <canvas class="confetti" id="confetti-canvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game data for all languages
            const words = {
                en: [
                    { type: 'word', text: 'sky', emoji: '🌌', hint: 's _ y' },
                    { type: 'word', text: 'find', emoji: '🔍', hint: 'f _ _ d' },
                    { type: 'word', text: 'mind', emoji: '🧠', hint: 'm _ _ d' },
                    { type: 'word', text: 'cry', emoji: '😢', hint: 'c _ y' },
                    { type: 'word', text: 'blind', emoji: '🙈', hint: 'b _ _ _ d' },
                    { type: 'sentence', text: 'The sky is blue', emoji: '🌌🔵', hint: 'The _ _ y is _ _ _ e' },
                    { type: 'sentence', text: 'The old man is blind', emoji: '👴🙈', hint: 'The _ _ d man is _ _ _ _ d' }
                ],
                ms: [
                    { type: 'word', text: 'surat', emoji: '✉️', hint: 's _ _ _ t' },
                    { type: 'word', text: 'semut', emoji: '🐜', hint: 's _ _ _ t' },
                    { type: 'word', text: 'sayur', emoji: '🥦', hint: 's _ _ _ r' },
                    { type: 'word', text: 'sijil', emoji: '📜', hint: 's _ _ _ l' },
                    { type: 'word', text: 'sikat', emoji: '💇', hint: 's _ _ _ t' },
                    { type: 'sentence', text: 'Semut gigit kaki saya', emoji: '🐜🦷🦵', hint: '_ _ _ _ _ gigit _ _ _ saya' }
                ],
                zh: [
                    { type: 'character', text: '认', pinyin: 'rèn', meaning: 'recognize', emoji: '🧠' },
                    { type: 'character', text: '进', pinyin: 'jìn', meaning: 'enter', emoji: '➡️' },
                    { type: 'character', text: '读', pinyin: 'dú', meaning: 'read', emoji: '📖' },
                    { type: 'character', text: '球', pinyin: 'qiú', meaning: 'ball', emoji: '⚽' },
                    { type: 'character', text: '温', pinyin: 'wēn', meaning: 'warm', emoji: '🌡️' },
                    { type: 'sentence', text: '我读很多书。', pinyin: 'wǒ dú hěn duō shū', meaning: 'I read many books' },
                    { type: 'sentence', text: '这个球很漂亮。', pinyin: 'zhè ge qiú hěn piào liang', meaning: 'This ball is very beautiful' }
                ]
            };

            // Instruction texts
            const instructions = {
                en: "<h3>How to Play:</h3><p><strong>Words:</strong> Look at the emoji clue and type the word</p><p><strong>Sentences:</strong> Type the full sentence</p><p><strong>Hint:</strong> Shows first/last letters</p><p><strong>Say It:</strong> Hear the pronunciation</p>",
                ms: "<h3>Cara Bermain:</h3><p><strong>Perkataan:</strong> Lihat emoji dan taip perkataan</p><p><strong>Ayat:</strong> Taip seluruh ayat</p><p><strong>Petunjuk:</strong> Tunjukkan huruf pertama/terakhir</p><p><strong>Dengarkan:</strong> Dengar sebutan</p>",
                zh: "<h3>如何玩:</h3><p><strong>单字:</strong> 看表情符号并输入汉字</p><p><strong>句子:</strong> 点击下面的字卡组合</p><p><strong>提示:</strong> 显示拼音和意思</p><p><strong>发音:</strong> 听正确发音</p>"
            };

            // Game elements
            const clueBox = document.getElementById('clue-box');
            const clueContent = document.getElementById('clue-content');
            const answerInput = document.getElementById('answer-input');
            const checkBtn = document.getElementById('check-btn');
            const hintBtn = document.getElementById('hint-btn');
            const speakBtn = document.getElementById('speak-btn');
            const messageDiv = document.getElementById('message');
            const characterTiles = document.getElementById('character-tiles');
            const progressText = document.getElementById('progress-text');
            const progressFill = document.getElementById('progress-fill');
            const instructionsDiv = document.getElementById('instructions');
            const languageTabs = document.querySelectorAll('.language-tab');
            const confettiCanvas = document.getElementById('confetti-canvas');

            let currentLanguage = 'en';
            let currentWords = words.en;
            let currentIndex = 0;
            let currentWord = currentWords[currentIndex];

            // Initialize game
            loadWord();
            updateInstructions();

            // Event listeners
            checkBtn.addEventListener('click', checkAnswer);
            hintBtn.addEventListener('click', showHint);
            speakBtn.addEventListener('click', speakWord);
            answerInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkAnswer();
            });

            languageTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Update active tab
                    languageTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Change language
                    currentLanguage = this.dataset.lang;
                    currentWords = words[currentLanguage];
                    currentIndex = 0;
                    loadWord();
                    updateInstructions();
                });
            });

            // Game functions
            function loadWord() {
                currentWord = currentWords[currentIndex];
                clueContent.textContent = currentWord.emoji || currentWord.text;
                answerInput.value = '';
                messageDiv.textContent = '';
                messageDiv.className = 'message';
                
                // Update progress
                progressText.textContent = `${currentIndex + 1}/${currentWords.length}`;
                progressFill.style.width = `${(currentIndex / (currentWords.length - 1)) * 100}%`;
                
                // Setup character tiles for Chinese sentences or multi-character words
                characterTiles.innerHTML = '';
                if (currentLanguage === 'zh' && 
                   (currentWord.type === 'sentence' || 
                   (currentWord.type === 'character' && currentWord.text.length > 1))) {
                    
                    const chars = currentWord.text.split('');
                    chars.forEach(char => {
                        const tile = document.createElement('div');
                        tile.className = 'character-tile';
                        tile.textContent = char;
                        tile.addEventListener('click', function() {
                            answerInput.value += char;
                            this.classList.add('used');
                        });
                        characterTiles.appendChild(tile);
                    });
                }
                
                // Update placeholder text based on language
                answerInput.placeholder = currentLanguage === 'zh' ? '输入汉字...' : 
                                         currentLanguage === 'ms' ? 'Taip jawapan...' : 
                                         'Type your answer...';
                                         
                // Update button texts
                checkBtn.textContent = currentLanguage === 'zh' ? '检查' : 
                                      currentLanguage === 'ms' ? 'Semak' : 
                                      'Check';
                hintBtn.textContent = currentLanguage === 'zh' ? '提示' : 
                                     currentLanguage === 'ms' ? 'Petunjuk' : 
                                     'Hint';
                speakBtn.textContent = currentLanguage === 'zh' ? '发音' : 
                                      currentLanguage === 'ms' ? 'Dengarkan' : 
                                      'Say It';
            }

            function updateInstructions() {
                instructionsDiv.innerHTML = instructions[currentLanguage];
            }

            function checkAnswer() {
                const userAnswer = answerInput.value.trim();
                let correctAnswer = currentWord.text;
                
                // For non-Chinese sentences, ignore case and punctuation
                if (currentLanguage !== 'zh' && currentWord.type === 'sentence') {
                    const normalizedUser = userAnswer.toLowerCase().replace(/[.,!?]/g, '');
                    const normalizedCorrect = correctAnswer.toLowerCase().replace(/[.,!?]/g, '');
                    if (normalizedUser === normalizedCorrect) {
                        showCorrect();
                        return;
                    }
                }
                
                if (userAnswer === correctAnswer) {
                    showCorrect();
                } else {
                    showIncorrect();
                }
            }
            
            function showCorrect() {
                let message = '';
                if (currentLanguage === 'zh') {
                    message = `正确! ${currentWord.pinyin} (${currentWord.meaning})`;
                } else if (currentLanguage === 'ms') {
                    message = 'Betul! ' + currentWord.text;
                } else {
                    message = 'Correct! ' + currentWord.text;
                }
                
                messageDiv.textContent = message;
                messageDiv.className = 'message correct';
                showConfetti();
                
                setTimeout(() => {
                    if (currentIndex < currentWords.length - 1) {
                        currentIndex++;
                        loadWord();
                    } else {
                        const completionMsg = currentLanguage === 'zh' ? '完成! 太棒了!' :
                                            currentLanguage === 'ms' ? 'Syabas! Anda sudah selesai!' :
                                            'Great job! You completed all words!';
                        messageDiv.textContent = completionMsg;
                    }
                }, 1500);
            }
            
            function showIncorrect() {
                const tryAgainMsg = currentLanguage === 'zh' ? '再试一次!' :
                                  currentLanguage === 'ms' ? 'Cuba lagi!' :
                                  'Try again!';
                messageDiv.textContent = tryAgainMsg;
                messageDiv.className = 'message wrong';
                
                // Shake animation
                answerInput.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    answerInput.style.animation = '';
                }, 500);
            }

            function showHint() {
                let hint = '';
                if (currentLanguage === 'zh') {
                    hint = `${currentWord.pinyin} (${currentWord.meaning})`;
                } else {
                    hint = currentWord.hint;
                }
                messageDiv.textContent = `Hint: ${hint}`;
                messageDiv.className = 'message';
            }

            function speakWord() {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(currentWord.text);
                    
                    // Set language based on current selection
                    if (currentLanguage === 'zh') {
                        utterance.lang = 'zh-CN';
                        utterance.rate = 0.8;
                    } else if (currentLanguage === 'ms') {
                        utterance.lang = 'ms-MY';
                    } else {
                        utterance.lang = 'en-US';
                    }
                    
                    speechSynthesis.speak(utterance);
                } else {
                    messageDiv.textContent = currentLanguage === 'zh' ? '浏览器不支持语音' :
                                            currentLanguage === 'ms' ? 'Penyuara tidak disokong' :
                                            'Speech not supported';
                    messageDiv.className = 'message';
                }
            }

            function showConfetti() {
                confettiCanvas.style.display = 'block';
                const ctx = confettiCanvas.getContext('2d');
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;
                
                const particles = [];
                const particleCount = 100;
                
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * confettiCanvas.width,
                        y: Math.random() * confettiCanvas.height - confettiCanvas.height,
                        size: Math.random() * 10 + 5,
                        color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                        speed: Math.random() * 3 + 2,
                        angle: Math.random() * Math.PI * 2
                    });
                }
                
                function animate() {
                    ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                    
                    let stillActive = false;
                    
                    particles.forEach(particle => {
                        particle.y += particle.speed;
                        particle.x += Math.cos(particle.angle) * 0.5;
                        
                        ctx.fillStyle = particle.color;
                        ctx.beginPath();
                        ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                        ctx.fill();
                        
                        if (particle.y < confettiCanvas.height) {
                            stillActive = true;
                        }
                    });
                    
                    if (stillActive) {
                        requestAnimationFrame(animate);
                    } else {
                        confettiCanvas.style.display = 'none';
                    }
                }
                
                animate();
            }
        });
    </script>
</body>
</html>
